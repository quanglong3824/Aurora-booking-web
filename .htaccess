# Aurora Booking Website - SEO Optimized .htaccess
# ================================================

# Enable URL Rewriting
RewriteEngine On

# Security Headers for SEO and Security
<IfModule mod_headers.c>
    # Security Headers
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    # Cache Control for Performance
    <FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
        Header set Cache-Control "max-age=31536000, public"
    </FilesMatch>
    
    # HTML Cache Control
    <FilesMatch "\.(html|htm|php)$">
        Header set Cache-Control "max-age=3600, public"
    </FilesMatch>
</IfModule>

# Compression for Better Performance
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Hide sensitive files
<Files ~ "^\.">
    Order allow,deny
    Deny from all
</Files>

# Protect config files
<FilesMatch "\.(ini|log|conf|sql|bak)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# SEO Friendly URLs - Remove .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

# Redirect www to non-www (Choose one based on preference)
# RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
# RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Force HTTPS (Uncomment when SSL is ready)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# SEO Friendly URL Routing
# Home page
RewriteRule ^trang-chu/?$ index.php [NC,L]
RewriteRule ^home/?$ index.php [NC,L]

# About page
RewriteRule ^gioi-thieu/?$ pages/gioi-thieu.php [NC,L]
RewriteRule ^about/?$ pages/gioi-thieu.php [NC,L]

# Rooms pages
RewriteRule ^phong-nghi/?$ pages/phong.php [NC,L]
RewriteRule ^rooms/?$ pages/phong.php [NC,L]
RewriteRule ^phong-tieu-chuan/?$ pages/phong-tieu-chuan.php [NC,L]
RewriteRule ^standard-room/?$ pages/phong-tieu-chuan.php [NC,L]
RewriteRule ^phong-deluxe/?$ pages/phong-deluxe.php [NC,L]
RewriteRule ^deluxe-room/?$ pages/phong-deluxe.php [NC,L]
RewriteRule ^phong-suite/?$ pages/phong-suite.php [NC,L]
RewriteRule ^suite-room/?$ pages/phong-suite.php [NC,L]

# Detailed Room Types - SEO Friendly URLs
# Deluxe Rooms
RewriteRule ^phong/deluxe/phong-deluxe-sang-trong/?$ pages/rooms/phong-deluxe/phong-deluxe-sang-trong.php [NC,L]
RewriteRule ^rooms/deluxe/deluxe-luxury-room/?$ pages/rooms/phong-deluxe/phong-deluxe-sang-trong.php [NC,L]

# Premium Deluxe Rooms
RewriteRule ^phong/premium-deluxe/phong-premium-deluxe-cao-cap/?$ pages/rooms/phong-premium-deluxe/phong-premium-deluxe-cao-cap.php [NC,L]
RewriteRule ^rooms/premium-deluxe/premium-deluxe-room/?$ pages/rooms/phong-premium-deluxe/phong-premium-deluxe-cao-cap.php [NC,L]

# Premium Deluxe Twin Rooms
RewriteRule ^phong/premium-deluxe-twin/phong-premium-deluxe-twin-doi/?$ pages/rooms/phong-premium-deluxe-twin/phong-premium-deluxe-twin-doi.php [NC,L]
RewriteRule ^rooms/premium-deluxe-twin/premium-deluxe-twin-room/?$ pages/rooms/phong-premium-deluxe-twin/phong-premium-deluxe-twin-doi.php [NC,L]

# Studio VIP Rooms
RewriteRule ^phong/studio-vip/phong-studio-vip-dang-cap/?$ pages/rooms/phong-studio-vip/phong-studio-vip-dang-cap.php [NC,L]
RewriteRule ^rooms/studio-vip/studio-vip-room/?$ pages/rooms/phong-studio-vip/phong-studio-vip-dang-cap.php [NC,L]

# Apartments - SEO Friendly URLs
# Family Apartments
RewriteRule ^can-ho/family/can-ho-family-gia-dinh/?$ pages/apartments/can-ho-family/can-ho-family-gia-dinh.php [NC,L]
RewriteRule ^apartments/family/family-apartment/?$ pages/apartments/can-ho-family/can-ho-family-gia-dinh.php [NC,L]

# Premium Apartments
RewriteRule ^can-ho/premium/can-ho-premium-sang-trong/?$ pages/apartments/can-ho-premium/can-ho-premium-sang-trong.php [NC,L]
RewriteRule ^apartments/premium/premium-apartment/?$ pages/apartments/can-ho-premium/can-ho-premium-sang-trong.php [NC,L]

# Studio Apartments
RewriteRule ^can-ho/studio/can-ho-studio-hien-dai/?$ pages/apartments/can-ho-studio/can-ho-studio-hien-dai.php [NC,L]
RewriteRule ^apartments/studio/studio-apartment/?$ pages/apartments/can-ho-studio/can-ho-studio-hien-dai.php [NC,L]

# Services
RewriteRule ^dich-vu/?$ pages/dich-vu.php [NC,L]
RewriteRule ^services/?$ pages/dich-vu.php [NC,L]

# Booking
RewriteRule ^dat-phong/?$ pages/dat-phong.php [NC,L]
RewriteRule ^booking/?$ pages/dat-phong.php [NC,L]

# Gallery
RewriteRule ^thu-vien-anh/?$ pages/thu-vien-anh.php [NC,L]
RewriteRule ^gallery/?$ pages/thu-vien-anh.php [NC,L]

# Contact
RewriteRule ^lien-he/?$ pages/lien-he.php [NC,L]
RewriteRule ^contact/?$ pages/lien-he.php [NC,L]

# Remove trailing slash for SEO
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [R=301,L]

# Custom Error Pages
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php

# Prevent access to admin folder from unauthorized IPs
# <Directory "admin">
#     Order Deny,Allow
#     Deny from all
#     Allow from 127.0.0.1
#     Allow from your.ip.address.here
# </Directory>

# Browser Caching for better performance
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
    ExpiresByType application/x-shockwave-flash "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 year"
    ExpiresDefault "access plus 2 days"
</IfModule>

# Prevent hotlinking
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?yourdomain.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?google.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?bing.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L]